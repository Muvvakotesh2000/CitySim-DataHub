# CitySim DataHub 🚀  
📡 **Real-Time Smart City Data Streaming, Processing, and Analytics**  

![CitySim DataHub](https://github.com/Muvvakotesh2000/CitySim-DataHub/blob/main/Screenshots/Dashboard.png?raw=true)

---

## 📌 Overview  
**CitySim DataHub** is a **real-time data processing and analytics platform** designed to monitor and analyze **environmental conditions, IoT sensor data, public services, traffic, and utilities**. Using **Apache Kafka, Apache Spark, AWS (S3, Glue, Redshift, OpenSearch), and Terraform**, it enables **efficient city management** through **data-driven insights**.

---

## ⚡ Features  
✅ **Real-time IoT & Smart City Data** – Simulated live feeds for various urban systems.  
✅ **Apache Kafka Streaming** – High-throughput message brokering for real-time data ingestion.  
✅ **Apache Spark Processing** – Structured Streaming for transforming, aggregating, and analyzing data.  
✅ **AWS Cloud Infrastructure** – S3 for storage, Glue for ETL, Redshift for warehousing, OpenSearch for analytics.  
✅ **Live Dashboards with OpenSearch & Tableau** – Interactive city insights for urban planners & decision-makers.  

---

## 🛠️ Tech Stack  
- **Programming Languages**: Python  
- **Data Streaming & Processing**: Apache Kafka, Apache Spark  
- **Cloud Services**: AWS (S3, Glue, Redshift, OpenSearch, Lambda, EventBridge)  
- **Infrastructure as Code**: Terraform  
- **Visualization**: OpenSearch, Tableau  

---

## 📂 Project Structure  
```
CitySim DataHub
│── AWS Scripts/                     # AWS Glue & Lambda scripts
│── configs/                          # Kafka & Spark configuration files
│── csv_exports/                      # Processed & aggregated CSV data
│── data/                              # Data schema & lookup files
│── infrastructure/terraform/          # Terraform scripts for AWS deployment
│── kafka_producers/                   # Kafka producers for IoT, environment, etc.
│── logs/                              # Logs & debugging info
│── screenshots/                       # Visuals of dashboards & AWS setup
│── scripts/                           # Data generation scripts
│── spark_consumer/                     # Spark consumer to process Kafka data
│── requirements.txt                   # Python dependencies
│── README.md                          # Documentation (this file)
│── CitySim.docx                        # Detailed project document
│── RealStreamingDatabase.twbx         # Tableau dashboard file
```

---

## 🚀 Setup & Installation  

### 1️⃣ Prerequisites  
Ensure you have the following installed:  
- **Python 3.8+**  
- **Apache Kafka**  
- **Apache Spark**  
- **Terraform**  
- **AWS CLI & Terraform CLI**  

---

### 2️⃣ Install Dependencies  
```bash
pip install -r requirements.txt
```

---

### 3️⃣ Start Apache Kafka & Zookeeper  
```bash
# Start Zookeeper
bin/zookeeper-server-start.sh config/zookeeper.properties

# Start Kafka Server
bin/kafka-server-start.sh config/server.properties
```
![Zookeeper Running](https://github.com/Muvvakotesh2000/CitySim-DataHub/blob/main/Screenshots/Zookeeper.png?raw=true)  
![Kafka Server Running](https://github.com/Muvvakotesh2000/CitySim-DataHub/blob/main/Screenshots/Apache%20Kafka.png?raw=true)  

---

### 4️⃣ Run Kafka Producers  
```bash
python kafka_producers/run_producers.py
```
![Kafka Producer](https://github.com/Muvvakotesh2000/CitySim-DataHub/blob/main/Screenshots/Kafka%20Producer.png?raw=true)  

---

### 5️⃣ Start Spark Consumer  
```bash
python spark_consumer/spark_kafka_consumer.py
```
![Spark Consumer Running](https://github.com/Muvvakotesh2000/CitySim-DataHub/blob/main/Screenshots/Apache%20Spark.png?raw=true)  

---

### 6️⃣ Deploy AWS Infrastructure using Terraform  
```bash
cd infrastructure/terraform
terraform init
terraform apply -auto-approve
```

---

### 7️⃣ AWS S3 Bucket Setup  
Create S3 buckets manually or using Terraform.  
- `citysim-raw-data-bucket` → Stores raw data.  
- `citysim-processed-data-bucket` → Stores processed data.  
![S3 Buckets](https://github.com/Muvvakotesh2000/CitySim-DataHub/blob/main/Screenshots/Raw%20S3%20Bucket.png?raw=true)  
![Processed S3](https://github.com/Muvvakotesh2000/CitySim-DataHub/blob/main/Screenshots/Processed%20S3%20Bucket.png?raw=true)  

---

### 8️⃣ Run AWS Glue Jobs  
```bash
python AWS\ Scripts/pushS3ToOS.py
python AWS\ Scripts/merge_hourly.py
```

---

### 9️⃣ Visualize Data with OpenSearch & Tableau  
- Connect OpenSearch to fetch real-time insights.  
- Use Tableau to create interactive dashboards.  
![CitySim Dashboard](https://github.com/Muvvakotesh2000/CitySim-DataHub/blob/main/Screenshots/Dashboard.png?raw=true)  

---

## 📊 Data Pipeline  
1️⃣ **Simulated IoT & City Data** → Generated by **Python scripts**  
2️⃣ **Real-Time Streaming** → Kafka **produces data every 5 seconds**  
3️⃣ **Data Processing** → Spark **reads, transforms & writes** processed data  
4️⃣ **Storage & ETL** → AWS **S3 (raw), Glue (ETL), Redshift (warehouse)**  
5️⃣ **Visualization & Analytics** → AWS **OpenSearch & Tableau**  

---

## 🔄 Scheduled Jobs  
🕒 **Hourly**: AWS Glue merges processed data → Redshift.  
🕒 **Daily (11:40 PM)**: Glue flattens raw data → S3.  
🕒 **Nightly (11:45 PM)**: Redshift loads flattened data → Data Warehouse.  
🕒 **Midnight Cleanup (12:00 PM)**: Lambda clears old data → Fresh day!  

---

## 👥 Contributors  
- **[Koteswara Rao Muvva](https://github.com/Muvvakotesh2000)** – Project Lead & Developer  
- **Open to Collaboration!** If you're passionate about **Big Data, Streaming, and Cloud**, feel free to contribute! 🚀  

---

## 🤝 Contributing  
1️⃣ **Fork the repository**  
2️⃣ **Create a new branch** (`feature-new`)  
3️⃣ **Commit your changes** (`git commit -m "Added new feature"`)  
4️⃣ **Push and create a Pull Request (PR)**  

---

## 📜 License  
📝 **MIT License** – Feel free to use, modify, and distribute!  

---

## 📞 Contact  
📧 Email: muvvakoteshyadav@gmail.com  
🌐 LinkedIn: [Koteswara Rao Muvva](https://www.linkedin.com/in/koteswararaomuvva/)  

---

### 🚀 **Built for the Future of Smart Cities!**  
**Let's make cities smarter, more efficient, and data-driven!** 🌍💡  

🔗 **Star ⭐ this repository** if you find it useful!  
💬 Drop a comment if you have suggestions!  

---

### **#SmartCities #BigData #Kafka #Spark #AWS #ETL #Terraform #DataEngineering #OpenSearch #Redshift #CitySimDataHub**  
